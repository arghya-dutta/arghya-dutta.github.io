!function(e){function t(t){for(var i,a,s=t[0],h=t[1],l=t[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);for(u&&u(t);f.length;)f.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],i=!0,s=1;s<r.length;s++){var h=r[s];0!==o[h]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=r[0]))}return e}var i={},o={0:0},n=[];function a(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=i,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/https://arghya-dutta.github.io/";var s=window.webpackJsonp=window.webpackJsonp||[],h=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=h;n.push([1468,1]),r()}({1468:function(e,t,r){"use strict";r.r(t);var i=r(27),o=r.n(i),n={type:o.a.AUTO,parent:"game",backgroundColor:"#40157d",scale:{width:1e3,height:450,mode:o.a.Scale.FIT,autoCenter:o.a.Scale.CENTER_BOTH},render:{pixelArt:!0},physics:{default:"arcade",arcade:{gravity:{y:250}}}},a=r(265),s=r.n(a);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e,r,i){var o,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=!(a=f(t).call(this,e,r,i,"hero-run-sheet",0))||"object"!==h(a)&&"function"!=typeof a?u(n):a,e.add.existing(u(o)),e.physics.add.existing(u(o)),o.setOrigin(.5,1),o.anims.play("hero-running"),o.body.setCollideWorldBounds(!0),o.body.setSize(12,40),o.body.setOffset(12,23),o.body.setMaxVelocity(250,450),o.body.setDragX(750),o.w_key=e.w_key,o.d_key=e.d_key,o.a_key=e.a_key,o.space_key=e.space_key,o.input={},o.setUpMovement(),o.setupAnimations(),o}var r,i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(i=[{key:"setupAnimations",value:function(){var e=this;this.animeState=new s.a({init:"idle",transitions:[{name:"idle",from:["falling","running","pivoting"],to:"idle"},{name:"run",from:["falling","idle","pivoting"],to:"running"},{name:"pivot",from:["falling","running"],to:"pivoting"},{name:"jump",from:["idle","running","pivoting"],to:"jumping"},{name:"flip",from:["jumping","falling"],to:"flipping"},{name:"fall",from:["idle","running","pivoting","jumping","flipping"],to:"falling"},{name:"die",from:"*",to:"dead"}],methods:{onEnterState:function(t){e.anims.play("hero-"+t.to),console.log(t)}}}),this.animePredicates={idle:function(){return e.body.onFloor()&&0===e.body.velocity.x},run:function(){return e.body.onFloor()&&Math.sign(e.body.velocity.x)===(e.flipX?-1:1)},pivot:function(){return e.body.onFloor()&&Math.sign(e.body.velocity.x)===(e.flipX?1:-1)},jump:function(){return e.body.velocity.y<0},flip:function(){return e.body.velocity.y<0&&e.moveState.is("flipping")},fall:function(){return e.body.velocity.y>0}}}},{key:"setUpMovement",value:function(){var e=this;this.moveState=new s.a({init:"standing",transitions:[{name:"jump",from:"standing",to:"jumping"},{name:"flip",from:["jumping","flipping"],to:"flipping"},{name:"fall",from:"standing",to:"falling"},{name:"touchdown",from:["jumping","flipping","falling"],to:"standing"},{name:"die",from:["jumping","flipping","falling","standing"],to:"dead"}],methods:{onEnterState:function(e){console.log(e)},onJump:function(){e.body.setVelocityY(-300)},onFlip:function(){e.body.setVelocityY(-150)},onDie:function(){e.body.setVelocity(0,0),e.body.setAcceleration(0)}}}),this.movePredicates={jump:function(){return e.input.didPressJump},flip:function(){return e.input.didPressJump},fall:function(){return!e.body.onFloor()},touchdown:function(){return e.body.onFloor()}}}},{key:"kill",value:function(){this.moveState.can("die")&&(this.moveState.die(),this.animeState.die(),this.emit("died"))}},{key:"isDead",value:function(){return this.moveState.is("dead")}},{key:"preUpdate",value:function(e,r){p(f(t.prototype),"preUpdate",this).call(this,e,r),this.input.didPressJump=!this.isDead()&&o.a.Input.Keyboard.JustDown(this.w_key),!this.isDead()&&this.a_key.isDown?(this.body.setAccelerationX(-500),this.setFlipX(!0),this.body.offset.x=8):!this.isDead()&&this.d_key.isDown?(this.body.setAccelerationX(500),this.setFlipX(!1),this.body.offset.x=12):(this.body.setVelocityX(0),this.body.setAccelerationX(0)),(this.moveState.is("jumping")||this.moveState.is("flipping"))&&!this.w_key.isDown&&this.body.velocity.y<-250&&this.body.setVelocityY(-250);var i=!0,n=!1,a=void 0;try{for(var s,h=this.moveState.transitions()[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var l=s.value;if(l in this.movePredicates&&this.movePredicates[l]()){this.moveState[l]();break}}}catch(e){n=!0,a=e}finally{try{i||null==h.return||h.return()}finally{if(n)throw a}}var u=!0,c=!1,d=void 0;try{for(var y,m=this.animeState.transitions()[Symbol.iterator]();!(u=(y=m.next()).done);u=!0){var b=y.value;if(b in this.animePredicates&&this.animePredicates[b]()){this.animeState[b]();break}}}catch(e){c=!0,d=e}finally{try{u||null==m.return||m.return()}finally{if(c)throw d}}}}])&&l(r.prototype,i),n&&l(r,n),t}(o.a.GameObjects.Sprite);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,g(t).call(this,{key:"GameScene"}))}var r,i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),r=t,(i=[{key:"init",value:function(e){}},{key:"preload",value:function(){this.load.tilemapTiledJSON("level-1","assets/levels/kakaparrot.json"),this.load.spritesheet("world-2-sheet","assets/world-3.png",{frameWidth:32,frameHeight:32,margin:1,spacing:2}),this.load.spritesheet("baboon-run-sheet","assets/baboon.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("hero-idle-sheet","assets/platform_gfx/platform_gfx/hero/idle.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-run-sheet","assets/platform_gfx/platform_gfx/hero/run.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-pivot-sheet","assets/platform_gfx/platform_gfx/hero/pivot.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-jump-sheet","assets/platform_gfx/platform_gfx/hero/jump.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-flip-sheet","assets/platform_gfx/platform_gfx/hero/spinjump.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-fall-sheet","assets/platform_gfx/platform_gfx/hero/fall.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("hero-die-sheet","assets/platform_gfx/platform_gfx/hero/bonk.png",{frameWidth:32,frameHeight:64})}},{key:"create",value:function(e){this.w_key=this.input.keyboard.addKey(o.a.Input.Keyboard.KeyCodes.W),this.d_key=this.input.keyboard.addKey(o.a.Input.Keyboard.KeyCodes.D),this.a_key=this.input.keyboard.addKey(o.a.Input.Keyboard.KeyCodes.A),this.space_key=this.input.keyboard.addKey(o.a.Input.Keyboard.KeyCodes.SPACE),this.anims.create({key:"hero-running",frames:this.anims.generateFrameNumbers("hero-run-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-idle",frames:this.anims.generateFrameNumbers("hero-idle-sheet")}),this.anims.create({key:"hero-pivoting",frames:this.anims.generateFrameNumbers("hero-pivot-sheet")}),this.anims.create({key:"hero-jumping",frames:this.anims.generateFrameNumbers("hero-jump-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-flipping",frames:this.anims.generateFrameNumbers("hero-flip-sheet"),frameRate:30,repeat:0}),this.anims.create({key:"hero-falling",frames:this.anims.generateFrameNumbers("hero-fall-sheet"),frameRate:10,repeat:-1}),this.anims.create({key:"hero-dead",frames:this.anims.generateFrameNumbers("hero-die-sheet")}),this.anims.create({key:"bador-chasing",frames:this.anims.generateFrameNumbers("baboon-run-sheet")}),this.score=0,this.scoreText=this.add.text(16,16,"score: 0",{fontSize:"32px",fill:"#000"}),this.addMap(),this.addHero(),this.addParrots(),this.addBador(),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels)}},{key:"addHero",value:function(){var e=this;this.hero=new d(this,this.spawnPos.x,this.spawnPos.y),this.cameras.main.startFollow(this.hero);var t=this.physics.add.collider(this.hero,this.map.getLayer("Ground").tilemapLayer),r=this.physics.add.overlap(this.hero,this.spikeGroup,(function(){e.hero.kill()}));this.hero.on("died",(function(){t.destroy(),r.destroy(),e.hero.body.setCollideWorldBounds(!1),e.cameras.main.stopFollow()}))}},{key:"addMap",value:function(){var e=this;this.map=this.make.tilemap({key:"level-1"}),this.parrots=this.add.group({});var t=this.map.addTilesetImage("world-2","world-2-sheet"),r=this.map.createStaticLayer("Ground",t);this.map.createStaticLayer("water",t),r.setCollision([1,2,5],!0),this.physics.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.physics.world.setBoundsCollision(!0,!0,!1,!0),this.spikeGroup=this.physics.add.group({immovable:!0,allowGravity:!1}),this.parrotGroup=this.physics.add.group({immovable:!0,allowGravity:!1}),this.badorGroup=this.physics.add.group({immovable:!0,allowGravity:!1}),this.map.getObjectLayer("Objects").objects.forEach((function(t){"Start"===t.name&&(e.spawnPos={x:t.x,y:t.y}),4===t.gid&&e.spikeGroup.create(t.x,t.y,"world-2-sheet",t.gid-1).setOrigin(0,1.8)}))}},{key:"addParrots",value:function(){var e=this;this.map.getObjectLayer("Objects").objects.forEach((function(t){if("parrot"===t.type){var r=e.parrotGroup.create(t.x,t.y,"world-2-sheet",t.gid-1);r.id=o.a.Math.Between(1,100),r.show=!0,r.setOrigin(0,1),e.reCreateParrots(r),e.parrots.add(r)}}))}},{key:"reCreateParrots",value:function(e){var t=this;e.visible=!0,this.physics.add.overlap(this.hero,e,(function(e,r){r.visible&&!t.hero.isDead()&&(t.score+=10,t.scoreText.text="Score: "+t.score,r.show=!1,r.visible=!1)}))}},{key:"addBador",value:function(){var e=this;this.map.getObjectLayer("Objects").objects.forEach((function(t){if("bador"===t.name){e.spawnBadorPos={x:t.x,y:t.y};var r=e.badorGroup.create(t.x,t.y,"baboon-run-sheet",0);e.bador=r,e.reCreateBador(r)}}))}},{key:"reCreateBador",value:function(e){var t=this;this.physics.add.overlap(this.hero,e,(function(e,r){t.hero.kill()})),this.physics.moveTo(e,this.spawnBadorPos.x,this.spawnBadorPos.y,300,1)}},{key:"update",value:function(e,t){var r=this,i=this.cameras.main.getWorldPoint(0,this.cameras.main.height).y;this.hero.isDead()&&this.hero.getBounds().top>i+100?(this.score=0,this.scoreText.text="Score: "+this.score,this.hero.destroy(),this.addHero(),this.parrotGroup.children.iterate((function(e){r.reCreateParrots(e)})),this.reCreateBador(this.bador)):this.hero.isDead()||this.physics.moveToObject(this.badorGroup.getFirstAlive(),this.hero,140)}}])&&m(r.prototype,i),n&&m(r,n),t}(o.a.Scene);new o.a.Game(Object.assign(n,{scene:[w]}))}});